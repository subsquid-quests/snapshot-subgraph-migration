"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FileOrUrl = exports.Url = exports.positiveInt = exports.nat = void 0;
const commander_1 = require("commander");
function nat(s) {
    let n = parseInt(s, 10);
    if (Number.isSafeInteger(n) && n >= 0)
        return n;
    throw new commander_1.InvalidArgumentError('Not a natural number');
}
exports.nat = nat;
function positiveInt(s) {
    let n = parseInt(s, 10);
    if (Number.isSafeInteger(n) && n > 0)
        return n;
    throw new commander_1.InvalidArgumentError('Not a positive integer');
}
exports.positiveInt = positiveInt;
function Url(protocols) {
    return function (s) {
        let url;
        try {
            url = new URL(s);
        }
        catch (e) {
            throw new commander_1.InvalidArgumentError('Invalid url');
        }
        if (protocols?.length && protocols.indexOf(url.protocol) < 0) {
            throw new commander_1.InvalidArgumentError(`Unsupported protocol. Expected one of: ${protocols.join(', ')}`);
        }
        return url.toString();
    };
}
exports.Url = Url;
function FileOrUrl(protocols) {
    let url = Url(protocols);
    return function (s) {
        if (s.includes('://')) {
            return url(s);
        }
        else {
            return s;
        }
    };
}
exports.FileOrUrl = FileOrUrl;
//# sourceMappingURL=validators.js.map